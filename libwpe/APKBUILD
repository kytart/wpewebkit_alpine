# Maintainer: signageOS <dev@signageos.io>
pkgname="libwpe"
pkgver="1.0.0"
pkgrel=0
pkgdesc="libwpe"
url="https://wpewebkit.org"
arch="armhf armv7"
license="custom"
depends="raspberrypi"
makedepends="raspberrypi-dev libxkbcommon-dev ninja"
options="!check"
source="https://wpewebkit.org/releases/${pkgname}-${pkgver}.tar.xz"
builddir="$srcdir"/$pkgname-$pkgver

build() {
    cd "$builddir"
    cmake \
        -DCMAKE_BUILD_TYPE=RelWithDebInfo \
        -DEGL_INCLUDE_DIRS=/opt/vc/include \
        -GNinja
    ninja
}

package() {
    cd "$builddir"
    DESTDIR="$pkgdir" ninja install
    mv "$pkgdir"/usr/local/* "$pkgdir"/usr
    rmdir "$pkgdir"/usr/local
}

sha512sums="9c4648c64b58f5056ecd0a70a0e78176edb476500f74925ed2cbaa9f704d117f4427341d2cf5a5f2549a64b904ab7c796370343847452c5e1e5e45747b0ff5f9  libwpe-1.0.0.tar.xz"
